<template>
	<view class="container">
		<!-- é¡¶éƒ¨banneråŒºåŸŸ -->
		<view class="banner-section">
			<swiper class="banner-swiper" indicator-dots autoplay circular>
				<swiper-item v-for="(item, index) in bannerList" :key="index">
					<image class="banner-image" :src="item.image" mode="aspectFill"></image>
				</swiper-item>
			</swiper>
		</view>
		
		<!-- ä¸­é—´åŠŸèƒ½æŒ‰é’®åŒºåŸŸ -->
		<view class="function-section">
			<view class="function-row">
				<view class="function-item" @click="navigateTo('ranking')">
					<image class="function-icon" src="/static/icons/ranking.png"></image>
					<text class="function-text">å¥½ç‰©æ’è¡Œ</text>
				</view>
				<view class="function-item" @click="navigateTo('making')">
					<image class="function-icon" src="/static/icons/making.png"></image>
					<text class="function-text">ç¾å›¾åˆ¶ä½œ</text>
				</view>
				<view class="function-item" @click="navigateTo('tutorial')">
					<image class="function-icon" src="/static/icons/tutorial.png"></image>
					<text class="function-text">æ•™ç¨‹åˆ†äº«</text>
				</view>
			</view>
			<view class="function-row">
				<view class="function-item" @click="navigateTo('local')">
					<image class="function-icon" src="/static/icons/local.png"></image>
					<text class="function-text">æœ¬åœ°æ’è¡Œ</text>
				</view>
				<view class="function-item" @click="navigateTo('find-route')">
					<image class="function-icon" src="/static/icons/find-route.png"></image>
					<text class="function-text">è·¯ä¹¦æŸ¥æ‰¾</text>
				</view>
				<view class="function-item" @click="navigateTo('make-route')">
					<image class="function-icon" src="/static/icons/make-route.png"></image>
					<text class="function-text">è·¯ä¹¦åˆ¶ä½œ</text>
				</view>
			</view>
		</view>


		
		<!-- åº•éƒ¨äº’åŠ¨åŒºåŸŸ -->
		<view class="interaction-section">
			<text class="section-title">äº’åŠ¨åŒºåŸŸ</text>
			<view class="interaction-list">
				<view class="interaction-item" v-for="(item, index) in interactionList" :key="index">
					<view class="user-info">
						<image class="user-avatar" :src="item.avatar"></image>
						<text class="user-name">{{item.name}}</text>
					</view>
					<text class="interaction-content">{{item.content}}</text>
					<view class="interaction-images" v-if="item.images && item.images.length > 0">
						<image 
							class="interaction-image" 
							v-for="(img, imgIndex) in item.images" 
							:key="imgIndex" 
							:src="img" 
							mode="aspectFill"
							@click="previewImage(item.images, imgIndex)">
						</image>
					</view>
					<view class="interaction-footer">
						<text class="interaction-time">{{item.time}}</text>
						<view class="interaction-actions">
							<view class="action-item" @click="likeItem(index)">
								<text class="action-icon" :class="{ liked: item.liked }">â¤ï¸</text>
								<text class="action-count">{{item.likes}}</text>
							</view>
							<view class="action-item" @click="commentItem(index)">
								<text class="action-icon">ğŸ’¬</text>
								<text class="action-count">{{item.comments}}</text>
							</view>
						</view>
					</view>
				</view>
			</view>
		</view>
		
		<!-- åº•éƒ¨å¯¼èˆªæ  -->
		<view class="tab-bar">
			<view class="tab-item" :class="{ active: activeTab === 'riding' }" @click="switchTab('riding')">
				<text class="tab-text">éª‘è¡Œ</text>
			</view>
			<view class="tab-item" :class="{ active: activeTab === 'discover' }" @click="switchTab('discover')">
				<text class="tab-text">å‘ç°</text>
			</view>
			<view class="tab-item" :class="{ active: activeTab === 'profile' }" @click="switchTab('profile')">
				<text class="tab-text">æˆ‘çš„</text>
			</view>
		</view>
	</view>
</template>
<script>
	export default {
		data() {
			return {
				// Banneræ•°æ®
				bannerList: [
					{ image: '/static/banner/banner1.jpg' },
					{ image: '/static/banner/banner2.jpg' },
					{ image: '/static/banner/banner3.jpg' }
				],
				// äº’åŠ¨åŒºåŸŸæ•°æ®
				interactionList: [
					{
						avatar: '/static/avatars/user1.jpg',
						name: 'éª‘è¡Œè¾¾äºº',
						content: 'ä»Šå¤©éª‘è¡Œäº†30å…¬é‡Œï¼Œé£æ™¯å¤ªç¾äº†ï¼åˆ†äº«ç»™å¤§å®¶çœ‹çœ‹ã€‚',
						images: [
							'/static/images/ride1.jpg',
							'/static/images/ride2.jpg'
						],
						time: '2å°æ—¶å‰',
						likes: 24,
						comments: 8,
						liked: false
					},
					{
						avatar: '/static/avatars/user2.jpg',
						name: 'å±±åœ°è½¦çˆ±å¥½è€…',
						content: 'å‘ç°äº†ä¸€æ¡è¶…æ£’çš„å±±åœ°éª‘è¡Œè·¯çº¿ï¼Œéš¾åº¦é€‚ä¸­ï¼Œé£æ™¯ä¼˜ç¾ï¼Œæ¨èç»™å¤§å®¶ï¼',
						images: [
							'/static/images/mountain1.jpg'
						],
						time: '5å°æ—¶å‰',
						likes: 56,
						comments: 12,
						liked: true
					}
				],
				// å½“å‰é€‰ä¸­çš„æ ‡ç­¾é¡µ
				activeTab: 'discover'
			}
		},
		onLoad() {
			// é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–æ•°æ®
			this.initData();
		},
		methods: {
			// åˆå§‹åŒ–æ•°æ®
			initData() {
				console.log('å‘ç°é¡µé¢æ•°æ®åˆå§‹åŒ–');
			},
			
			// å¯¼èˆªåˆ°åŠŸèƒ½é¡µé¢
			navigateTo(page) {
				console.log('å¯¼èˆªåˆ°é¡µé¢:', page);
				// è¿™é‡Œå¯ä»¥å®ç°å…·ä½“é¡µé¢è·³è½¬é€»è¾‘
			},
			
			// ç‚¹èµäº’åŠ¨å†…å®¹
			likeItem(index) {
				this.interactionList[index].liked = !this.interactionList[index].liked;
				if (this.interactionList[index].liked) {
					this.interactionList[index].likes++;
				} else {
					this.interactionList[index].likes--;
				}
			},
			
			// è¯„è®ºäº’åŠ¨å†…å®¹
			commentItem(index) {
				console.log('è¯„è®ºå†…å®¹:', index);
				// è¿™é‡Œå¯ä»¥å®ç°è¯„è®ºåŠŸèƒ½
			},
			
			// é¢„è§ˆå›¾ç‰‡
			previewImage(images, current) {
				uni.previewImage({
					urls: images,
					current: current
				});
			},
			
			// åˆ‡æ¢æ ‡ç­¾é¡µ
			switchTab(tab) {
				this.activeTab = tab;
				console.log('åˆ‡æ¢åˆ°æ ‡ç­¾é¡µ:', tab);
				if(tab === 'riding') {
					// è·³è½¬åˆ°éª‘è¡Œé¡µé¢..
					uni.switchTab({
						url: '/pages/index/index'
					});
				} else if(tab === 'profile') {
					// è·³è½¬åˆ°æˆ‘çš„é¡µé¢
					uni.switchTab({
						url: '/pages/index/my'
					});
				}
			}
		}
	}
</script>
<style>
	.container {
		display: flex;
		flex-direction: column;
		height: 100vh;
		padding: 10px;
		padding-bottom: 60px; /* ä¸ºåº•éƒ¨å¯¼èˆªæ ç•™å‡ºç©ºé—´ */
		background-color: #f5f5f5ff;
	}

	/* é¡¶éƒ¨banneråŒºåŸŸæ ·å¼ */
	.banner-section {
		height: 80px; /* å‡å°banneré«˜åº¦ */
		border-radius: 10px;
		overflow: hidden;
		margin-bottom: 10px;
	}
	
	.banner-swiper {
		width: 100%;
		height: 100%;
	}
	
	.banner-image {
		width: 100%;
		height: 100%;
	}
	/* ä¸­é—´åŠŸèƒ½æŒ‰é’®åŒºåŸŸæ ·å¼ */
	.function-section {
		background-color: #bcc4d6ff;
		border-radius: 10px;
		padding: 10px;
		margin-bottom: 10px;
		box-shadow: 0 2px 5px rgba(0,0,0,0.1);
		height: 130px;
		overflow: visible;
	}
	
	.function-row {
		display: flex;
		flex: 1; 
		flex-direction: row; /* æ˜ç¡®æŒ‡å®šä¸ºè¡Œå¸ƒå±€ */
		justify-content: space-between;
		margin-bottom: 10px;
		width: 100%;
		height: 50px;
		position: relative;
		flex-wrap: nowrap; /* ç¡®ä¿ä¸æ¢è¡Œ */
	}
	
	.function-row:last-child {
		margin-bottom: 0;
	}
	
	.function-item {
		flex: 1;      
		width: calc(33% - 10px);  /*ä½¿ç”¨calcè®¡ç®—å®½åº¦ï¼Œå‡å»é—´è· */
		display: flex;
		/*flex-direction: column;*/
		align-items: center;
		padding: 5px 0;
		box-sizing: border-box;
		background-color: #f1f2f5ff;
		border-radius: 5px;
		justify-content: center;
		height: 100%;
		flex: 0 0 auto; /* ä¸ä¼¸ç¼©ï¼Œä¸å‹ç¼© */
		position: relative;
		z-index: 1;
		overflow: visible;
		max-width: calc(33.33% - 10px); /* è®¾ç½®æœ€å¤§å®½åº¦ */
	}

	.function-item:active {
		background-color: #f5f5f5;
	}
	
	.function-icon {
		width: 20px;
		height: 20px;
		margin-bottom: 5px;
		display: block;
	}
	
	.function-text {
		font-size: 12px;
		color: #333;
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
		display: block;
		text-align: center;
	}

	
	/* åº•éƒ¨äº’åŠ¨åŒºåŸŸæ ·å¼ */
	.interaction-section {
		flex: 1;
		background-color: #ffffff;
		border-radius: 10px;
		padding: 15px;
		margin-bottom: 10px;
		box-shadow: 0 2px 5px rgba(0,0,0,0.1);
		display: flex;
		flex-direction: column;
	}
	
	.section-title {
		font-size: 18px;
		font-weight: bold;
		margin-bottom: 10px;
		color: #333;
	}
	
	.interaction-list {
		flex: 1;
		overflow-y: auto;
	}
	
	.interaction-item {
		padding: 15px 0;
		border-bottom: 1px solid #eee;
	}
	
	.interaction-item:last-child {
		border-bottom: none;
	}
	
	.user-info {
		display: flex;
		align-items: center;
		margin-bottom: 10px;
	}
	
	.user-avatar {
		width: 40px;
		height: 40px;
		border-radius: 50%;
		margin-right: 10px;
	}
	
	.user-name {
		font-size: 16px;
		font-weight: bold;
		color: #333;
	}
	
	.interaction-content {
		font-size: 16px;
		color: #333;
		margin-bottom: 10px;
		line-height: 1.5;
	}
	
	.interaction-images {
		display: flex;
		flex-wrap: wrap;
		margin-bottom: 10px;
	}
	
	.interaction-image {
		width: 100px;
		height: 100px;
		margin-right: 5px;
		margin-bottom: 5px;
		border-radius: 5px;
	}
	
	.interaction-footer {
		display: flex;
		justify-content: space-between;
		align-items: center;
	}
	
	.interaction-time {
		font-size: 12px;
		color: #999;
	}
	
	.interaction-actions {
		display: flex;
	}
	
	.action-item {
		display: flex;
		align-items: center;
		margin-left: 15px;
	}
	
	.action-icon {
		font-size: 16px;
		margin-right: 5px;
	}
	
	.action-icon.liked {
		color: #FF5722;
	}
	
	.action-count {
		font-size: 12px;
		color: #666;
	}
	
	/* åº•éƒ¨å¯¼èˆªæ æ ·å¼ */
	.tab-bar {
		position: fixed;
		bottom: 0;
		left: 0;
		right: 0;
		height: 50px;
		background-color: #ffffff;
		display: flex;
		flex-direction: row; /* æ˜ç¡®æŒ‡å®šä¸ºè¡Œå¸ƒå±€ */
		justify-content: space-between; /* å·¦ä¸­å³å¸ƒå±€ */
		align-items: center; /* å‚ç›´å±…ä¸­ */
		box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
		z-index: 100;
	}
	
	.tab-item {
		flex: 1; /* æ¯ä¸ªé¡¹ç›®å æ®ç›¸ç­‰çš„ç©ºé—´ */
		height: 100%;
		display: flex;
		justify-content: center;
		align-items: center;
		text-align: center; /* æ–‡æœ¬å±…ä¸­ */
	}
	
	.tab-item.active {
		border-bottom: 2px solid #FF5722;
	}
	
	.tab-text {
		font-size: 16px;
		color: #666;
	}
	
	.tab-item.active .tab-text {
		color: #FF5722;
		font-weight: bold;
	}
</style>
