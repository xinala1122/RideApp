{"version":3,"file":"my.js","sources":["pages/index/my.uvue","../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvbXkudXZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<!-- 顶部数据区域 -->\r\n\t\t<view class=\"data-section\">\r\n\t\t\t<text class=\"section-title\">我的数据</text>\r\n\t\t\t<view class=\"data-list\">\r\n\t\t\t\t<view class=\"data-list-item\">\r\n\t\t\t\t\t<text class=\"data-list-label\">总里程</text>\r\n\t\t\t\t\t<text class=\"data-list-value\">{{totalDistance}} km</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"data-list-item\">\r\n\t\t\t\t\t<text class=\"data-list-label\">最快速度</text>\r\n\t\t\t\t\t<text class=\"data-list-value\">{{maxSpeed}} km/h</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"data-list-item\">\r\n\t\t\t\t\t<text class=\"data-list-label\">最长时间</text>\r\n\t\t\t\t\t<text class=\"data-list-value\">{{maxTime}} h</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 中间历史骑行数据区域 -->\r\n\t\t<view class=\"history-section\">\r\n\t\t\t<text class=\"section-title\">历史骑行数据</text>\r\n\t\t\t<view class=\"history-list\">\r\n\t\t\t\t<view class=\"history-item\" v-for=\"(item, index) in historyData\" :key=\"index\">\r\n\t\t\t\t\t<view class=\"history-date\">\r\n\t\t\t\t\t\t<text class=\"date-text\">{{item.date}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"history-details\">\r\n\t\t\t\t\t\t<text class=\"time-text\">{{item.time}}</text>\r\n\t\t\t\t\t\t<text class=\"location-text\">{{item.location}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 底部设备区域 -->\r\n\t\t<view class=\"device-section\">\r\n\t\t\t<text class=\"section-title\">我的设备</text>\r\n\t\t\t<view class=\"device-container\">\r\n\t\t\t\t<view class=\"device-box\" @click=\"toggleBluetooth\">\r\n\t\t\t\t\t<text class=\"device-name\">{{deviceName}}</text>\r\n\t\t\t\t\t<text class=\"device-status\">{{deviceStatus}}</text>\r\n\t\t\t\t\t<text class=\"search-hint\" v-if=\"isSearching\">搜索中...</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- 设备列表 -->\r\n\t\t\t<view class=\"device-list\" v-if=\"discoveredDevices.length > 0\">\r\n\t\t\t\t<view class=\"device-list-item\" v-for=\"(device, index) in discoveredDevices\" :key=\"index\"\r\n\t\t\t\t\t@click=\"connectDevice(device)\">\r\n\t\t\t\t\t<text class=\"device-item-name\">{{device.name || '未知设备'}}</text>\r\n\t\t\t\t\t<text class=\"device-item-signal\">信号强度: {{device.RSSI}}dBm</text>\r\n\t\t\t\t\t<view class=\"device-item-actions\">\r\n\t\t\t\t\t\t<view class=\"action-button\" @click.stop=\"disconnectDevice(device)\" v-if=\"device.connected\">\r\n\t\t\t\t\t\t\t<text class=\"action-text\">断开</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"action-button\" @click.stop=\"removeDevice(device)\">\r\n\t\t\t\t\t\t\t<text class=\"action-text\">移除</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\r\n\t\t<!-- 底部导航栏 -->\r\n\t\t<view class=\"tab-bar\">\r\n\t\t\t<view class=\"tab-item\" :class=\"{ active: activeTab === 'riding' }\" @click=\"switchTab('riding')\">\r\n\t\t\t\t<text class=\"tab-text\">骑行</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"tab-item\" :class=\"{ active: activeTab === 'history' }\" @click=\"switchTab('history')\">\r\n\t\t\t\t<text class=\"tab-text\">历史</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"tab-item\" :class=\"{ active: activeTab === 'profile' }\" @click=\"switchTab('profile')\">\r\n\t\t\t\t<text class=\"tab-text\">我的</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"uts\">\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// 数据展示\r\n\t\t\t\ttotalDistance: 128.5,\r\n\t\t\t\tmaxSpeed: 35.2,\r\n\t\t\t\tmaxTime: 4.5,\r\n\t\t\t\t// 历史骑行数据\r\n\t\t\t\thistoryData: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdate: '2023-06-15',\r\n\t\t\t\t\t\ttime: '14:30 - 16:45',\r\n\t\t\t\t\t\tlocation: '城市公园'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdate: '2023-06-10',\r\n\t\t\t\t\t\ttime: '09:15 - 11:30',\r\n\t\t\t\t\t\tlocation: '湖边绿道'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdate: '2023-06-05',\r\n\t\t\t\t\t\ttime: '16:00 - 18:20',\r\n\t\t\t\t\t\tlocation: '山地赛道'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdate: '2023-05-28',\r\n\t\t\t\t\t\ttime: '10:30 - 13:15',\r\n\t\t\t\t\t\tlocation: '滨江路'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t// 设备信息\r\n\t\t\t\tdeviceName: '智能骑行传感器 A1',\r\n\t\t\t\tdeviceStatus: '未连接',\r\n\t\t\t\t// 蓝牙相关数据\r\n\t\t\t\tisSearching: false,\r\n\t\t\t\tdiscoveredDevices: [],\r\n\t\t\t\tconnectedDeviceId: '',\r\n\t\t\t\tbluetoothEnabled: false,\r\n\t\t\t\t// 当前选中的标签页\r\n\t\t\t\tactiveTab: 'history'\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\t\t\t// 页面加载时初始化数据\r\n\t\t\tthis.initData();\r\n\t\t\t// 初始化蓝牙适配器\r\n\t\t\tthis.initBluetooth();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 初始化数据\r\n\t\t\tinitData() {\r\n\t\t\t\t// 这里可以从本地存储或服务器获取数据\r\n\t\t\t\tuni.__f__('log','at pages/index/my.uvue:135','我的页面数据初始化');\r\n\t\t\t},\r\n\r\n\t\t\t// 初始化蓝牙适配器\r\n\t\t\tinitBluetooth() {\r\n\t\t\t\tuni.__f__('log','at pages/index/my.uvue:140','初始化蓝牙适配器');\r\n\r\n\t\t\t\t// 监听蓝牙状态变化\r\n\t\t\t\tuni.onBluetoothAdapterStateChange((res) => {\r\n\t\t\t\t\tif (!res.available) {\r\n\t\t\t\t\t\tthis.deviceStatus = '蓝牙不可用';\r\n\t\t\t\t\t\tthis.bluetoothEnabled = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.bluetoothEnabled = true;\r\n\t\t\t\t\t\tthis.deviceStatus = '蓝牙已就绪';\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// 检查蓝牙是否可用\r\n\t\t\t\tuni.getBluetoothAdapterState({\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:156','getBluetoothAdapterState', res);\r\n\t\t\t\t\t\tif (!res.available) {\r\n\t\t\t\t\t\t\tthis.deviceStatus = '蓝牙不可用';\r\n\t\t\t\t\t\t\tthis.bluetoothEnabled = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.bluetoothEnabled = true;\r\n\t\t\t\t\t\t\tthis.deviceStatus = '蓝牙已就绪';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tuni.__f__('error','at pages/index/my.uvue:166','获取蓝牙适配器状态失败', err);\r\n\t\t\t\t\t\tthis.deviceStatus = '蓝牙不可用';\r\n\t\t\t\t\t\tthis.bluetoothEnabled = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 切换蓝牙开关\r\n\t\t\ttoggleBluetooth() {\r\n\t\t\t\tif (this.bluetoothEnabled) {\r\n\t\t\t\t\tthis.closeBluetooth();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.openBluetooth();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\r\n\r\n\t\t\t// 打开蓝牙\r\n\t\t\topenBluetooth() {\r\n\t\t\t\tuni.__f__('log','at pages/index/my.uvue:187','打开蓝牙');\r\n\t\t\t\tuni.__f__('log','at pages/index/my.uvue:188',uni.getSystemInfoSync().platform);\r\n\t\t\t\tif (uni.getSystemInfoSync().platform === 'android') {\r\n\t\t\t\t\t// Android平台\r\n\t\t\t\t\tuni.openBluetoothAdapter({\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:193','openBluetoothAdapter success', res);\r\n\t\t\t\t\t\t\tthis.bluetoothEnabled = true;\r\n\t\t\t\t\t\t\tthis.deviceStatus = '蓝牙已开启';\r\n\t\t\t\t\t\t\t// 自动开始搜索设备\r\n\t\t\t\t\t\t\tthis.searchDevices();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\t\tif (res.errCode === 10001) {\r\n\t\t\t\t\t\t\t\tuni.onBluetoothAdapterStateChange((res) => {\r\n\t\t\t\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:202','onBluetoothAdapterStateChange', res);\r\n\t\t\t\t\t\t\t\t\tif (res.available) {\r\n\t\t\t\t\t\t\t\t\t\tthis.bluetoothEnabled = true;\r\n\t\t\t\t\t\t\t\t\t\tthis.deviceStatus = '蓝牙已开启';\r\n\t\t\t\t\t\t\t\t\t\t// 自动开始搜索设备\r\n\t\t\t\t\t\t\t\t\t\tthis.searchDevices();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.deviceStatus = '蓝牙开启失败';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (uni.getSystemInfoSync().platform === 'ios') {\r\n\t\t\t\t\t// iOS平台\r\n\t\t\t\t\tuni.openBluetoothAdapter({\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:218','openBluetoothAdapter success', res);\r\n\t\t\t\t\t\t\tthis.bluetoothEnabled = true;\r\n\t\t\t\t\t\t\tthis.deviceStatus = '蓝牙已开启';\r\n\t\t\t\t\t\t\t// 自动开始搜索设备\r\n\t\t\t\t\t\t\tthis.searchDevices();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\t\tthis.deviceStatus = '蓝牙开启失败';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 关闭蓝牙\r\n\t\t\tcloseBluetooth() {\r\n\t\t\t\tuni.__f__('log','at pages/index/my.uvue:233','关闭蓝牙');\r\n\t\t\t\tuni.closeBluetoothAdapter({\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:236','关闭蓝牙适配器成功', res);\r\n\t\t\t\t\t\tthis.bluetoothEnabled = false;\r\n\t\t\t\t\t\tthis.deviceStatus = '蓝牙已关闭';\r\n\t\t\t\t\t\t// 断开所有连接的设备\r\n\t\t\t\t\t\tthis.disconnectAllDevices();\r\n\t\t\t\t\t\t// 清空设备列表\r\n\t\t\t\t\t\tthis.discoveredDevices = [];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tuni.__f__('error','at pages/index/my.uvue:245','关闭蓝牙适配器失败', err);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 判断数组中是否包含某个元素\r\n\t\t\tinArray(arr, key, val) {\r\n\t\t\t\tfor (let i = 0; i < arr.length; i++) {\r\n\t\t\t\t\tif (arr[i][key] === val) {\r\n\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn -1;\r\n\t\t\t},\r\n\r\n\t\t\t// 搜索设备\r\n\t\t\tsearchDevices() {\r\n\t\t\t\tif (!this.bluetoothEnabled) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请先开启蓝牙',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.isSearching) {\r\n\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:271','正在搜索中，请稍候...');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuni.__f__('log','at pages/index/my.uvue:275','开始搜索蓝牙设备');\r\n\t\t\t\tthis.isSearching = true;\r\n\t\t\t\tthis.deviceStatus = '搜索中...';\r\n\t\t\t\tthis.discoveredDevices = [];\r\n\r\n\t\t\t\t\r\n\t\t\t\t// 使用uni-app的蓝牙API\r\n\t\t\t\tuni.openBluetoothAdapter({\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:284','蓝牙适配器已打开', res);\r\n\r\n\t\t\t\t\t\t// 开始搜索设备\r\n\t\t\t\t\t\tuni.startBluetoothDevicesDiscovery({\r\n\t\t\t\t\t\t\tallowDuplicatesKey: true,  // 添加这一行，允许重复上报设备\r\n\t\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:290','开始搜索设备', res);\r\n\r\n\t\t\t\t\t\t\t\t// 监听发现新设备事件\r\n\t\t\t\t\t\t\t\tuni.onBluetoothDeviceFound((res) => {\r\n\t\t\t\t\t\t\t\t\t//uni.__f__('log','at pages/index/my.uvue:294','发现新设备', res);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tres.devices.forEach(device => {\r\n\t\t\t\t\t\t\t\t\t\tif (!device.name && !device.localName) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:300','发现新设备1111', device.name);\r\n\t\t\t\t\t\t\t\t\t\tconst foundDevices = this.discoveredDevices;\r\n\t\t\t\t\t\t\t\t\t\tconst idx = this.inArray(foundDevices, 'deviceId', device.deviceId);\r\n\t\t\t\t\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:303','发现新设备inArray', idx);\r\n\t\t\t\t\t\t\t\t\t\tconst data = {};\r\n\t\t\t\t\t\t\t\t\t\tif (idx === -1) {\r\n\t\t\t\t\t\t\t\t\t\t\t// 过滤设备，只显示名称中包含\"AINSTEC_\"的设备\r\n\t\t\t\t\t\t\t\t\t\t\tif (device.name && device.name.includes('AINSTEC_')) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:308','发现新设备oooo', res);\r\n\t\t\t\t\t\t\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:309','发现新设备oooo', device.name);\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.discoveredDevices.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeviceId: device.deviceId,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname: device.name,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tRSSI: device.RSSI,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconnected: false\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:318','发现新设备pppp', res);\r\n\t\t\t\t\t\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:319','发现新设备pppp', device.name);\r\n\t\t\t\t\t\t\t\t\t\t\t// 更新已存在的设备信息\r\n\t\t\t\t\t\t\t\t\t\t\tthis.discoveredDevices[idx] = {\r\n\t\t\t\t\t\t\t\t\t\t\t\t...this.discoveredDevices[idx],\r\n\t\t\t\t\t\t\t\t\t\t\t\tRSSI: device.RSSI,\r\n\t\t\t\t\t\t\t\t\t\t\t\tname: device.name || this.discoveredDevices[idx].name\r\n\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\t\tuni.__f__('error','at pages/index/my.uvue:331','搜索设备失败', err);\r\n\t\t\t\t\t\t\t\tthis.isSearching = false;\r\n\t\t\t\t\t\t\t\tthis.deviceStatus = '搜索失败';\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// 10秒后停止搜索\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tthis.stopSearchDevices();\r\n\t\t\t\t\t\t}, 3000);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tuni.__f__('error','at pages/index/my.uvue:343','打开蓝牙适配器失败', err);\r\n\t\t\t\t\t\tthis.isSearching = false;\r\n\t\t\t\t\t\tthis.deviceStatus = '蓝牙开启失败';\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 停止搜索设备\r\n\t\t\tstopSearchDevices() {\r\n\t\t\t\tuni.__f__('log','at pages/index/my.uvue:352','停止搜索蓝牙设备');\r\n\t\t\t\tuni.stopBluetoothDevicesDiscovery({\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:355','停止搜索设备成功', res);\r\n\t\t\t\t\t\tthis.isSearching = false;\r\n\t\t\t\t\t\tif (this.discoveredDevices.length === 0) {\r\n\t\t\t\t\t\t\tthis.deviceStatus = '未找到设备';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.deviceStatus = '找到 ' + this.discoveredDevices.length + ' 个设备';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tuni.__f__('error','at pages/index/my.uvue:364','停止搜索设备失败', err);\r\n\t\t\t\t\t\tthis.isSearching = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 连接设备\r\n\t\t\tconnectDevice(device) {\r\n\t\t\t\tuni.__f__('log','at pages/index/my.uvue:373','连接设备', device);\r\n\t\t\t\tif (!this.bluetoothEnabled) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请先开启蓝牙',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.deviceStatus = '连接中...';\r\n\r\n\t\t\t\t// 使用uni-app的蓝牙API连接设备\r\n\t\t\t\tuni.createBLEConnection({\r\n\t\t\t\t\tdeviceId: device.deviceId,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:388','连接设备成功', res);\r\n\r\n\t\t\t\t\t\t// 更新设备状态\r\n\t\t\t\t\t\tdevice.connected = true;\r\n\t\t\t\t\t\tthis.connectedDeviceId = device.deviceId;\r\n\t\t\t\t\t\tthis.deviceName = device.name || '未知设备';\r\n\t\t\t\t\t\tthis.deviceStatus = '已连接';\r\n\r\n\t\t\t\t\t\t// 停止搜索\r\n\t\t\t\t\t\tthis.stopSearchDevices();\r\n\r\n\t\t\t\t\t\t// 获取设备服务\r\n\t\t\t\t\t\tthis.getBLEDeviceServices(device.deviceId);\r\n\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '连接成功',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tuni.__f__('error','at pages/index/my.uvue:408','连接设备失败', err);\r\n\t\t\t\t\t\tthis.deviceStatus = '连接失败';\r\n\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '连接失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 断开设备连接\r\n\t\t\tdisconnectDevice(device) {\r\n\t\t\t\tuni.__f__('log','at pages/index/my.uvue:421','断开设备连接', device);\r\n\r\n\t\t\t\t// 使用uni-app的蓝牙API断开连接\r\n\t\t\t\tuni.closeBLEConnection({\r\n\t\t\t\t\tdeviceId: device.deviceId,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:427','断开设备连接成功', res);\r\n\r\n\t\t\t\t\t\t// 更新设备状态\r\n\t\t\t\t\t\tdevice.connected = false;\r\n\t\t\t\t\t\tif (this.connectedDeviceId === device.deviceId) {\r\n\t\t\t\t\t\t\tthis.connectedDeviceId = '';\r\n\t\t\t\t\t\t\tthis.deviceName = '智能骑行传感器 A1';\r\n\t\t\t\t\t\t\tthis.deviceStatus = '已断开';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '已断开连接',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tuni.__f__('error','at pages/index/my.uvue:443','断开设备连接失败', err);\r\n\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '断开失败',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 断开所有设备连接\r\n\t\t\tdisconnectAllDevices() {\r\n\t\t\t\tuni.__f__('log','at pages/index/my.uvue:455','断开所有设备连接');\r\n\r\n\t\t\t\t// 遍历所有已连接的设备并断开连接\r\n\t\t\t\tthis.discoveredDevices.forEach(device => {\r\n\t\t\t\t\tif (device.connected) {\r\n\t\t\t\t\t\tthis.disconnectDevice(device);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 移除设备\r\n\t\t\tremoveDevice(device) {\r\n\t\t\t\tuni.__f__('log','at pages/index/my.uvue:467','移除设备', device);\r\n\r\n\t\t\t\t// 如果设备已连接，先断开连接\r\n\t\t\t\tif (device.connected) {\r\n\t\t\t\t\tthis.disconnectDevice(device);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 从设备列表中移除\r\n\t\t\t\tconst index = this.discoveredDevices.findIndex(d => d.deviceId === device.deviceId);\r\n\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\tthis.discoveredDevices.splice(index, 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 如果移除的是当前连接的设备，重置状态\r\n\t\t\t\tif (this.connectedDeviceId === device.deviceId) {\r\n\t\t\t\t\tthis.connectedDeviceId = '';\r\n\t\t\t\t\tthis.deviceName = '智能骑行传感器 A1';\r\n\t\t\t\t\tthis.deviceStatus = '已移除';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '已移除设备',\r\n\t\t\t\t\ticon: 'success'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 获取蓝牙设备服务\r\n\t\t\tgetBLEDeviceServices(deviceId) {\r\n\t\t\t\tuni.__f__('log','at pages/index/my.uvue:495','获取设备服务', deviceId);\r\n\r\n\t\t\t\tuni.getBLEDeviceServices({\r\n\t\t\t\t\tdeviceId: deviceId,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:500','获取设备服务成功', res);\r\n\r\n\t\t\t\t\t\t// 遍历所有服务\r\n\t\t\t\t\t\tres.services.forEach(service => {\r\n\t\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:504','服务UUID:', service.uuid);\r\n\r\n\t\t\t\t\t\t\t// 获取服务特征值\r\n\t\t\t\t\t\t\tthis.getBLEDeviceCharacteristics(deviceId, service.uuid);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tuni.__f__('error','at pages/index/my.uvue:511','获取设备服务失败', err);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 获取蓝牙设备特征值\r\n\t\t\tgetBLEDeviceCharacteristics(deviceId, serviceId) {\r\n\t\t\t\tuni.__f__('log','at pages/index/my.uvue:518','获取设备特征值', deviceId, serviceId);\r\n\r\n\t\t\t\tuni.getBLEDeviceCharacteristics({\r\n\t\t\t\t\tdeviceId: deviceId,\r\n\t\t\t\t\tserviceId: serviceId,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:524','获取设备特征值成功', res);\r\n\r\n\t\t\t\t\t\t// 遍历所有特征值\r\n\t\t\t\t\t\tres.characteristics.forEach(characteristic => {\r\n\t\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:528','特征值UUID:', characteristic.uuid);\r\n\r\n\t\t\t\t\t\t\t// 如果特征值支持通知或指示，则启用通知\r\n\t\t\t\t\t\t\tif (characteristic.properties.notify || characteristic.properties.indicate) {\r\n\t\t\t\t\t\t\t\tthis.notifyBLECharacteristicValueChange(deviceId, serviceId, characteristic.uuid);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tuni.__f__('error','at pages/index/my.uvue:537','获取设备特征值失败', err);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 启用蓝牙设备特征值变化通知\r\n\t\t\tnotifyBLECharacteristicValueChange(deviceId, serviceId, characteristicId) {\r\n\t\t\t\tuni.__f__('log','at pages/index/my.uvue:544','启用蓝牙设备特征值变化通知', deviceId, serviceId, characteristicId);\r\n\r\n\t\t\t\tuni.notifyBLECharacteristicValueChange({\r\n\t\t\t\t\tdeviceId: deviceId,\r\n\t\t\t\t\tserviceId: serviceId,\r\n\t\t\t\t\tcharacteristicId: characteristicId,\r\n\t\t\t\t\tstate: true,\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:552','启用蓝牙设备特征值变化通知成功', res);\r\n\r\n\t\t\t\t\t\t// 监听特征值变化\r\n\t\t\t\t\t\tuni.onBLECharacteristicValueChange((res) => {\r\n\t\t\t\t\t\t\tuni.__f__('log','at pages/index/my.uvue:556','特征值变化', res);\r\n\t\t\t\t\t\t\t// 这里可以处理接收到的数据\r\n\t\t\t\t\t\t\t// 例如：this.handleReceivedData(res.value);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\tuni.__f__('error','at pages/index/my.uvue:562','启用蓝牙设备特征值变化通知失败', err);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 处理接收到的数据\r\n\t\t\thandleReceivedData(buffer) {\r\n\t\t\t\t// 将ArrayBuffer转换为字符串\r\n\t\t\t\tconst str = this.ab2hex(buffer);\r\n\t\t\t\tuni.__f__('log','at pages/index/my.uvue:571','接收到的数据:', str);\r\n\r\n\t\t\t\t// 这里可以根据实际协议解析数据\r\n\t\t\t\t// 例如：解析传感器数据、控制命令等\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// ArrayBuffer转16进制字符串\r\n\t\t\tab2hex(buffer) {\r\n\t\t\t\tconst hexArr = Array.prototype.map.call(\r\n\t\t\t\t\tnew Uint8Array(buffer),\r\n\t\t\t\t\tfunction (bit) {\r\n\t\t\t\t\t\treturn ('00' + bit.toString(16)).slice(-2)\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t\treturn hexArr.join('');\r\n\t\t\t},\r\n\r\n\t\t\t// 切换标签页\r\n\t\t\tswitchTab(tab) {\r\n\t\t\t\tthis.activeTab = tab;\r\n\t\t\t\tuni.__f__('log','at pages/index/my.uvue:592','切换到标签页:', tab);\r\n\t\t\t\t// 这里可以添加切换标签页的逻辑\r\n\t\t\t\tif (tab === 'riding') {\r\n\t\t\t\t\t// 跳转到骑行页面\r\n\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\turl: '/pages/index/index'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n\t\r\n</script>\r\n\r\n<style>\r\n\t.container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\theight: 100vh;\r\n\t\tpadding: 10px;\r\n\t\tpadding-bottom: 60px;\r\n\t\t/* 为底部导航栏留出空间 */\r\n\t\tbackground-color: #f5f5f5;\r\n\t}\r\n\r\n\t/* 顶部数据区域样式 */\r\n\t.data-section {\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-radius: 10px;\r\n\t\tpadding: 10px;\r\n\t\t/* 减小内边距 */\r\n\t\tmargin-bottom: 10px;\r\n\t\tbox-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n\t\theight: 200px;\r\n\t\t/* 固定高度，减小一半左右 */\r\n\t}\r\n\r\n\t.section-title {\r\n\t\tfont-size: 16px;\r\n\t\t/* 减小字体大小 */\r\n\t\tfont-weight: bold;\r\n\t\tmargin-bottom: 5px;\r\n\t\t/* 减小下边距 */\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.data-list {\r\n\t\tbackground-color: #f9f9f9;\r\n\t\tborder-radius: 8px;\r\n\t\toverflow: hidden;\r\n\t\theight: calc(100% - 25px);\r\n\t\t/* 计算剩余高度 */\r\n\t}\r\n\r\n\t.data-list-item {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding: 8px 10px;\r\n\t\t/* 减小内边距 */\r\n\t\tborder-bottom: 1px solid #eee;\r\n\t}\r\n\r\n\t.data-list-item:last-child {\r\n\t\tborder-bottom: none;\r\n\t}\r\n\r\n\t.data-list-label {\r\n\t\tfont-size: 14px;\r\n\t\t/* 减小字体大小 */\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.data-list-value {\r\n\t\tfont-size: 14px;\r\n\t\t/* 减小字体大小 */\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t/* 中间历史骑行数据区域样式 */\r\n\t.history-section {\r\n\t\tflex: 1;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-radius: 10px;\r\n\t\tpadding: 15px;\r\n\t\tmargin-bottom: 10px;\r\n\t\tbox-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t.history-list {\r\n\t\tflex: 1;\r\n\t\toverflow-y: auto;\r\n\t}\r\n\r\n\t.history-item {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tpadding: 15px;\r\n\t\tborder-bottom: 1px solid #eee;\r\n\t}\r\n\r\n\t.history-item:last-child {\r\n\t\tborder-bottom: none;\r\n\t}\r\n\r\n\t.history-date {\r\n\t\tmargin-bottom: 8px;\r\n\t}\r\n\r\n\t.date-text {\r\n\t\tfont-size: 16px;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.history-details {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n\r\n\t.time-text {\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.location-text {\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t/* 底部设备区域样式 */\r\n\t.device-section {\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-radius: 10px;\r\n\t\tpadding: 15px;\r\n\t\tmargin-bottom: 10px;\r\n\t\tbox-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);\r\n\t}\r\n\r\n\t.device-container {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tpadding: 20px 0;\r\n\t}\r\n\r\n\t.device-box {\r\n\t\twidth: 200px;\r\n\t\theight: 120px;\r\n\t\tbackground-color: #f0f0f0;\r\n\t\tborder: 2px dashed #ccc;\r\n\t\tborder-radius: 8px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.device-name {\r\n\t\tfont-size: 16px;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333;\r\n\t\tmargin-bottom: 8px;\r\n\t}\r\n\r\n\t.device-status {\r\n\t\tfont-size: 14px;\r\n\t\tcolor: #FF5722;\r\n\t}\r\n\r\n\t.search-hint {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #FF5722;\r\n\t\tmargin-top: 5px;\r\n\t}\r\n\r\n\t.device-list {\r\n\t\tmargin-top: 15px;\r\n\t\tborder-top: 1px solid #eee;\r\n\t\tpadding-top: 15px;\r\n\t}\r\n\r\n\t.device-list-item {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tpadding: 15px;\r\n\t\tborder-bottom: 1px solid #eee;\r\n\t\tbackground-color: #f9f9f9;\r\n\t\tborder-radius: 8px;\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\r\n\t.device-list-item:last-child {\r\n\t\tborder-bottom: none;\r\n\t\tmargin-bottom: 0;\r\n\t}\r\n\r\n\t.device-item-name {\r\n\t\tfont-size: 16px;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333;\r\n\t\tmargin-bottom: 5px;\r\n\t}\r\n\r\n\t.device-item-signal {\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #666;\r\n\t\tmargin-bottom: 10px;\r\n\t}\r\n\r\n\t.device-item-actions {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-end;\r\n\t\tgap: 10px;\r\n\t}\r\n\r\n\t.action-button {\r\n\t\tpadding: 5px 10px;\r\n\t\tbackground-color: #f0f0f0;\r\n\t\tborder-radius: 4px;\r\n\t\tfont-size: 12px;\r\n\t\tcolor: #333;\r\n\t}\r\n\r\n\t.action-button:active {\r\n\t\tbackground-color: #e0e0e0;\r\n\t}\r\n\r\n\r\n\r\n\t/* 底部导航栏样式 */\r\n\t.tab-bar {\r\n\t\tposition: fixed;\r\n\t\tbottom: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\theight: 50px;\r\n\t\tbackground-color: #ffffff;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\t/* 明确指定为行布局 */\r\n\t\tjustify-content: space-between;\r\n\t\t/* 左中右布局 */\r\n\t\talign-items: center;\r\n\t\t/* 垂直居中 */\r\n\t\tbox-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1);\r\n\t\tz-index: 100;\r\n\t}\r\n\r\n\t.tab-item {\r\n\t\tflex: 1;\r\n\t\t/* 每个项目占据相等的空间 */\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\ttext-align: center;\r\n\t\t/* 文本居中 */\r\n\t}\r\n\r\n\t.tab-item:first-child {\r\n\t\tjustify-content: flex-start;\r\n\t\t/* 第一个项目左对齐 */\r\n\t\tpadding-left: 20px;\r\n\t\t/* 左边添加一些内边距 */\r\n\t}\r\n\r\n\t.tab-item:last-child {\r\n\t\tjustify-content: flex-end;\r\n\t\t/* 最后一个项目右对齐 */\r\n\t\tpadding-right: 20px;\r\n\t\t/* 右边添加一些内边距 */\r\n\t}\r\n\r\n\t.tab-item:nth-child(2) {\r\n\t\tjustify-content: center;\r\n\t\t/* 中间项目居中 */\r\n\t}\r\n\r\n\t.tab-item.active {\r\n\t\tborder-bottom: 2px solid #FF5722;\r\n\t}\r\n\r\n\t.tab-text {\r\n\t\tfont-size: 16px;\r\n\t\tcolor: #666;\r\n\t}\r\n\r\n\t.tab-item.active .tab-text {\r\n\t\tcolor: #FF5722;\r\n\t\tfont-weight: bold;\r\n\t}\r\n</style>","import MiniProgramPage from 'E:/GitLab/ESP32/HBuilderX.4.76.2025082103/uniappRide/pages/index/my.uvue'\nwx.createPage(MiniProgramPage)"],"names":["defineComponent","uni","res"],"mappings":"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"}